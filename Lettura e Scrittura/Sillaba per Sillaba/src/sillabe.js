
function aggiungi_lista(){
valore = $("#lista_stimoli").val();
switch(valore){
case "1":
$("#area_stimoli").val("ca/sa,vo/ce,no/ce,da/do,fu/ne,lu/na,pa/ne,so/no,se/te,pi/no,la/to,er/ba,go/la,de/vo,ne/ve,lu/ca,lu/ce,re/mo,fo/ro,so/lo");
break;
case "2":
$("#area_stimoli").val("be/ne,no/ce,di/to,vi/no,la/na,ro/sa,pen/na,not/te,ga/ra,fi/lo,tet/to,ca/ne,ro/ba,ri/so,mo/da,go/la");
break;
case "3":
$("#area_stimoli").val("va/sca,me/tro,dra/go,ve/tro,stu/fa,scu/sa,sco/pa,ta/sca,pa/sta,so/sta,fe/sta,mo/sca,pi/sta,pre/te,pra/to");
break;
case "4":
$("#area_stimoli").val("te/so/ro,sa/li/ta,po/sa/re,me/ri/to,su/bi/to,ca/li/ce,te/ne/ro,por/to/ne,can/di/do");
break;
case "5":
$("#area_stimoli").val("pa/pe/ri/no,te/le/fo/no,se/ma/fo/ro,pre/sen/ta/re,no/mi/na/re,par/ti/va/mo,de/lu/de/re");
break;
case "6":
$("#area_stimoli").val("be/ne,ba/ci,ba/ra,ca/sa,ca/ne,ce/ra,ci/ma,ci/bo,ci/na,co/no,co/ro,co/da,co/va");
break;
case "7":
$("#area_stimoli").val("cu/bo,da/do,da/ma,de/vo,do/no,di/no,do/do,da/to,do/te,di/to,du/na,fu/ne,fu/mo");
break;
case "8":
$("#area_stimoli").val("fi/lo,fi/no,fi/co,fo/ca,fo/ce,fe/ce,fa/to,fo/to,fe/to,fa/ta,fa/ro,ga/ra,go/la,ge/co,ge/lo");
break;
case "9":
$("#area_stimoli").val("gi/no,gi/ta,gu/fo,la/go,la/to,lu/na,lu/po,lu/ca,lu/ce,le/so,le/va,li/no,la/na,la/ma");
break;
case "10":
$("#area_stimoli").val("li/ma,re/mo,fa/ro,fo/ro,ma/le,ma/go,me/le,mi/na,ma/no,mo/do,me/no,ma/re,mo/re");
break;
case "11":
$("#area_stimoli").val("mo/to,me/lo,mi/to,mu/to,mu/lo,mo/da,mu/ro,na/so,ni/do,no/do,no/ce,no/te,ne/ve");
break;
case "12":
$("#area_stimoli").val("no/ve,na/ve,pi/no,pa/pa,pi/pa,pi/la,pa/la,pa/lo,pe/ro,pa/ra,pe/lo,pa/lo,pa/ne,po/mo");
break;
case "13":
$("#area_stimoli").val("po/li,pu/ma,ri/ta,ri/ga,ra/mo,ra/pa,ra/ta,ro/ma,ro/ba,ri/va,re/mo,ra/na,ne/ra,ra/me");
break;
case "14":
$("#area_stimoli").val("ru/pe,ri/so,ro/sa,so/le,sa/le,so/no,se/te,se/ta,se/ga,se/ra,sa/ra,sa/na,so/lo,to/po,");
break;
case "15":
$("#area_stimoli").val("to/ro,to/mo,ti/ro,te/la,te/se,tu/bo,va/so,vi/so,vi/te,vo/to,vo/ce,vi/no,ve/la,ve/lo,ve/ne,ve/do,vo/lo");
break;
case "16":
$("#area_stimoli").val("al/to,ir/to,ur/to,at/to,et/to,ur/lo,ot/to,al/ce,al/pi,er/ba,or/so,ar/co,ar/ma,ar/te,el/fo");
break;
case "17":
$("#area_stimoli").val("el/mo,el/sa,ar/ca,or/to,al/ga,an/ta,or/bo,or/co,ar/pa,on/da,or/ma,or/ca");
break;
case "18":
$("#area_stimoli").val("pen/na,not/te,tet/to,bot/te,tat/to,tut/to,tet/to,dan/no,fan/no,bal/lo,cal/lo,mat/to,mot/to");
break;
case "19":
$("#area_stimoli").val("bat/ti,pet/to,tos/se,son/no,san/no,fol/le,fol/la,fal/la,piz/za,puz/za,pez/zo,lut/to");
break;
case "20":
$("#area_stimoli").val("tan/to,can/to,cal/vo,tom/ba,dol/ce,tal/pa,par/te,por/to,pon/go,pon/te,mon/do,for/ca");
break;
case "21":
$("#area_stimoli").val("bar/ca,den/ti,ven/to,ten/da,por/ta,tor/ta,cor/da,tar/ga,bar/ba,fir/ma,ver/me,cor/vo");
break;
case "22":
$("#area_stimoli").val("pan/ca,par/co,pom/pa,bom/ba,pul/ce,pal/co,men/to,men/ta,len/te,van/ga,fal/ce");
break;
case "19":
$("#area_stimoli").val("fan/go,lin/ce,mer/lo,mar/te,mor/te,car/te,bor/sa,dar/do,fun/go,gam/ba,fin/ge,cal/ze");
break;
case "20":
$("#area_stimoli").val("cin/ta,cir/co,vol/pe,for/no,pal/ma,car/ne,pin/za,cor/po,ban/ca,pol/so");
break;
case "21":
$("#area_stimoli").val("di/sco,ce/sto,ca/sto,ca/sco,co/sto,gu/sto,ge/sto,stu/fa,sti/ro,fe/sta,fu/sto,mo/sca");
break;
case "22":
$("#area_stimoli").val("pa/sta,pa/sto,po/sto,pe/sto,pi/sta,va/sca,sco/pa,bo/sco,spa/go,spi/ga,spa/da,spe/sa");
break;
case "23":
$("#area_stimoli").val("ru/spa,spo/si,spi/ne,ve/spa,scu/do,li/sca,ve/ste,sca/la,bu/sta,te/sta,ta/sca");
break;
case "24":
$("#area_stimoli").val("le/pre,la/dro,me/tro,pra/to,tre/no,ve/tro,ze/bra,ma/gro,bru/co,bro/do,ma/dre,pa/dre");
break;
case "25":
$("#area_stimoli").val("fra/te,tro/ta,co/bra,ti/gre,dra/go,li/bro,ca/pra,tro/no,ce/dro,ce/tra,pre/sa,tra/ve,cro/ce");
break;
case "26":
$("#area_stimoli").val("cie/lo,piat/ti,tie/pi/do,pia/no,tie/ni,fie/ro,aiu/to,piu/ma,lia/na,cuo/re,pia/no,fuo/co");
break;
case "27":
$("#area_stimoli").val("fio/re,cuo/co,fia/la,pie/de,suo/ra,suo/la,mie/le,ruo/ta,via/le,sie/pe,fie/no,fiu/me");
break;
case "28":
$("#area_stimoli").val("ba,bi,bo,bu,ca,co,cu,fa,fe,fo,fu,ga,go,gu,la,le,li,lo,ma,me,mi,mu,na,ni,no,nu,pe,pi,po,pu,ra,re,ri,ru,sa,se,so,su,te,ti,to,tu,va,ve,vi,vo,za,ze,zi,zu");
break;
case "29":
$("#area_stimoli").val("ca,ce,ci,co,cu,fa,fe,fi,fo,fu,ga,ge,gi,go,gu,la,le,li,lo,lu");
break;
case "30":
$("#area_stimoli").val("ma,me,mi,mo,mu,na,ne,ni,no,nu,pa,pe,pi,po,pu,ra,re,ri,ro,ru");
break;
case "31":
$("#area_stimoli").val("sa,se,si,so,su,ta,te,ti,to,tu,va,ve,vi,vo,vu,za,ze,zi,zo,zu");
break;
case "32":
$("#area_stimoli").val("bal,bel,bil,bol,fin,fon,fun,fan,tal,til,tol,tul,zar,zer,zir,zur,pal,pel,pol,pil,van,ven,vin,von,cal,col,sam,sem,sim,sum");
break;
case "33":
$("#area_stimoli").val("ban,bin,bon,bun,mer,mir,mor,mur,ram,rem,rim,rum,vam,vim,vom,vum,car,cor,cur,pan,pen,pon,pun,tan,ten,tin,ton,sal,sil,sol,sul");
break;
case "34":
$("#area_stimoli").val("mal,mil,mol,mul,tar,ter,tir,tor,can,con,cun,fel,fil,fol,ful,zam,zum,zem,zim,val,vel,vol,vul,rul,ral,rel,rol,par,pir,por,pur");
break;
case "35":
$("#area_stimoli").val("mam,mem,mom,mum,zel,zil,zol,zul,far,fir,for,fur,len,lin,lon,lun,ran,ren,rin,run,san,sen,sin,son,tim,tom,tum,tam,gan,gon,gun");
break;
case "36":
$("#area_stimoli").val("var,ver,vor,vur,pam,pem,pim,pum,men,min,mon,mun,gal,gol,gul,lar,lir,lor,lur,zan,zen,zin,zon,sar,ser,sir,sor,lem,lim,lom,lum");
break;
case "37":
$("#area_stimoli").val("bra,bre,bri,bro,cra,cre,cro,cru,fra,fre,fri,fru,pli,ple,plo,plu,vle,vli,vlo,vlu,sme,smi,smo,smu,spa,spe,spo,spu");
break;
case "38":
$("#area_stimoli").val("tre,tri,tro,tru,bla,ble,bli,blu,fla,fli,flo,flu,tla,tli,tlo,tlu,sba,sbe,sbi,sbu,sfa,sfe,sfo,sfu,sva,sve,svi");
break;
case "39":
$("#area_stimoli").val("vra,vre,vro,vru,pra,pre,pri,pro,dle,dli,dlo,dlu,sle,sli,slo,slu,sca,sco,scu,sda,sde,sdo,sdu,sta,ste,sti,svo");
break;
case "40":
$("#area_stimoli").val("svu,scra,scro,scru,spra,spro,spri,spre,stri,stru,sto,gra,gre,gri,gru,cla,cle,cli,clusbra,sbro,sbru,stra,stre,sga,sgo,sgu");
break;
}
}

var Sillabe = {



riavvia:function(){
$("#guess").val("");
this.esatte_array = [];
this.myrisposte = [];
this.esatte = 0;
this.valuta_trasparenza();
this.index = 0;
this.prova = false;
this.game_over = false;
$("#game_options").show();
$("#game_panel").hide();
$("#risultato_container").hide();
},

avvio: function(){
$("#esatto_errato").css("opacity",0);
$("#error").hide();
if($("#area_stimoli").val() != ""){
$("#risultato_container").hide();
this.game_over = false;
$("#clicca_continuare").click(function(){
if (Sillabe.game_over){
Sillabe.riavvia();
}
});

$("#risultato_container").hide();
this.esatte_array = [];
this.myrisposte = [];
Sillabe.esatte = 0;
$("#next").css("cursor","default");
$("#next").css("opacity","0");
$("#progress").empty();
this.valuta_trasparenza();
this.index = 0;
this.prova = false;
$("#game_options").hide();
$("#game_panel").show();
this.tempo_esposizione = $("#tempo_esposizione").val();
this.maiuscole = $("#maiuscole").is(':checked');
this.randomized = $("#randomized").is(':checked');
this.lista_stimoli = this.estrai($("#area_stimoli").val());
this.segmenta(this.index);
}
else{
$("#error").fadeIn(400).delay(2000).fadeOut(400); 
}

if(this.maiuscole){
$("#guess").css("text-transform","uppercase");
$(".sillaba").css("text-transform","uppercase");
}
else{
$("#guess").css("text-transform","none");
$(".sillaba").css("text-transform","none");
}



}
,

valuta_trasparenza: function(){
valore = $("#trasparenza").val();
switch(valore){
case "0":
Sillabe.trasparenza = "0";
break;
case "1":
Sillabe.trasparenza = "0.3";
break;
}
},

segmenta: function(quale){
$("#parola").empty();
for(i=0;i<this.lista_stimoli[quale].length;i++){
$("#parola").append("<h1 class='sillaba' id='sillaba_"+i+"'>"+this.lista_stimoli[quale][i]+"</h1>");
}
if(this.maiuscole){
$("#guess").css("text-transform","uppercase");
$(".sillaba").css("text-transform","uppercase");
}
else{
$("#guess").css("text-transform","none");
$(".sillaba").css("text-transform","none");
}

$(".sillaba").css("opacity",Sillabe.trasparenza);
$(".sillaba").css("font-size",this.grandezza_font);
this.mostra_parola(0,this.lista_stimoli[quale]);
},


mostra_parola: function(i,parola) {
Sillabe.over = false;
$("#avanzamento_"+Sillabe.index).removeClass("grey");
$("#avanzamento_"+Sillabe.index).addClass("yellow");
$("#avanzamento_"+Sillabe.index).addClass("glyphicon-screenshot");
$("#avanzamento_"+Sillabe.index).removeClass("glyphicon-question-sign");


$("#guess").css("opacity","0");
$("#guess").css("cursor","default");
if (i<parola.length){
if(i>0){
$("#sillaba_"+(i-1)).css("opacity",Sillabe.trasparenza);
}
$("#sillaba_"+i).css("opacity","1");
posizione = i;
parola_intera = parola;
nascondi = setInterval(function(){
clearInterval(nascondi);
Sillabe.mostra_parola(posizione+1,parola_intera);
},Sillabe.tempo_esposizione);
}
else
{
for(i=0;i<parola.length;i++){
$("#sillaba_"+i).css("opacity","1");
}
$(".sillaba").text("##");
$("#guess").css("opacity","1");
$("#guess").css("cursor","text");
$("#guess").prop("disabled",false);
$("#guess").focus();
this.prova = true;
}
},


estrai: function(array_stimoli){
array_temp = [];
array_stimoli = array_stimoli.split(",");
for(z=0; z<array_stimoli.length;z++){
array_stimoli[z] = array_stimoli[z].trim();
}
if(array_stimoli[array_stimoli.length-1] == ""){
array_stimoli.pop();
}
for (i=0; i<array_stimoli.length;i++){
array_temp.push(array_stimoli[i].split("/"));
}
array_stimoli = array_temp;
if(this.randomized){
array_stimoli = this.shuffle(array_stimoli);
}
for (j=0; j<array_stimoli.length; j++){
$("#progress").append("<span class='glyphicon glyphicon-question-sign grey' id='avanzamento_"+j+"'></span>&nbsp;"); 
}

$("#next").click(function(){

Sillabe.avanza();
});

Sillabe.totali = array_stimoli.length;
return array_stimoli;
},

avanza: function(){
Sillabe.myrisposte.push($("#guess").val());
$("#esatto_errato").css("opacity",0);
if (Sillabe.over == true){
if(Sillabe.index < Sillabe.lista_stimoli.length -1){
Sillabe.index += 1;
$("#parola").empty();
Sillabe.segmenta(Sillabe.index);
$("#guess").val("");
$("#next").css("cursor","default");
$("#next").css("opacity","0");
}
else{
Sillabe.game_over = true;
$("#guess").val("");
$("#game_panel").hide();
$("#risultato").css("color","white");
$("#risultato").text("ok");
$("#clicca_continuare").text("Clicca qui per giocare ancora!");
$("#green_bar").css("width","0");
$("#risultato_container").show();
percentuale = 0;
percentuale = Sillabe.esatte*100/Sillabe.lista_stimoli.length;
if (Sillabe.esatte != 1){
$("#risultato").css("color","green");
$("#risultato").text("Hai totalizzato " + Sillabe.esatte + " risposte esatte su " + Sillabe.totali + "!");}
else
{
$("#risultato").css("color","green");
$("#risultato").text("Hai totalizzato 1 risposta esatta su " + Sillabe.totali + "!");
}
$("#mytbody").empty();
for(i=0;i<Sillabe.lista_stimoli.length;i++){
$("#mytbody").append("<tr><td>"+Sillabe.lista_stimoli[i].join("")+"</td><td>"+Sillabe.myrisposte[i]+"</td>"+Sillabe.evaluateanswer(i)+"</tr>");}

$("#clicca_continuare").text("Clicca qui per giocare ancora!");

barra = setInterval(function(){
if(i<percentuale){
i+=1;
$("#progress_bar").css("width",i+"%");
$("#progress_bar").text(i+"%");
}
else{
clearInterval(barra);
}
},50);


}
}
},

evaluateanswer(numero){
if(Sillabe.esatte_array[numero]){
return "<td><span class='glyphicon glyphicon-star' aria-hidden='true'></span></td>";
}else{
return "<td><span class='glyphicon glyphicon-star-empty' aria-hidden='true'></span></td>";
}
},

getRandomInt: function(min,max) {
    return Math.floor(Math.random() * (max - min + 1)) + min;
},

shuffle: function(o){ //v1.0
    for(var j,x,i = o.length; i; j = Math.floor(Math.random() * i),x = o[--i],o[i] = o[j],o[j] = x);
    return o;
}


}

$(document).ready(function(){
$("#area_stimoli").text("ca/sa,vo/ce,no/ce,da/do,fu/ne,lu/na,pa/ne,so/no,se/te,pi/no,la/to,er/ba,go/la,de/vo,ne/ve,lu/ca,lu/ce,re/mo,fo/ro,so/lo");
$("#error").hide();
$("cancella_tutto").click(function(e){
 e.preventDefault();
$("#area_stimoli").val("");
$("#area_stimoli").focus();
});

$("#maiuscole").change(function(){
if($("#maiuscole").is(':checked')){
$("#area_stimoli").css("text-transform","uppercase");
}else{
$("#area_stimoli").css("text-transform","none");
}
});

$("#interrompere").click(function(){

Sillabe.riavvia();

});
});

$(document).keypress(function(e) {
    if(e.which == 13 && Sillabe.prova == true) {
		Sillabe.prova = false;
		if($("#guess").val() == Sillabe.lista_stimoli[Sillabe.index].join("")){
		$("#esatto_errato").css("color","green");
		$("#esatto_errato").text("Esatto! La parola era:");
		for(i=0;i<Sillabe.lista_stimoli[i].length;i++){
		$("#sillaba_"+i).text(Sillabe.lista_stimoli[Sillabe.index][i]);}
		$("#esatto_errato").css("opacity",1);
		$(".sillaba").css("color","green");
		$("#avanzamento_"+Sillabe.index).removeClass("yellow");
		$("#avanzamento_"+Sillabe.index).addClass("green");
		$("#avanzamento_"+Sillabe.index).addClass("glyphicon-star");
		$("#avanzamento_"+Sillabe.index).removeClass("glyphicon-screenshot");
		Sillabe.esatte_array.push(1);
		Sillabe.esatte += 1;
		}else{
		$("#esatto_errato").css("opacity",1);
		$("#esatto_errato").css("color","red");
		$("#esatto_errato").text("Riprova! La parola era:");
		for(i=0;i<Sillabe.lista_stimoli[i].length;i++){
		$("#sillaba_"+i).text(Sillabe.lista_stimoli[Sillabe.index][i]);}
		$(".sillaba").css("color","red");
		$("#avanzamento_"+Sillabe.index).removeClass("yellow");
		$("#avanzamento_"+Sillabe.index).addClass("red");
		$("#avanzamento_"+Sillabe.index).addClass("glyphicon-star-empty");
		$("#avanzamento_"+Sillabe.index).removeClass("glyphicon-screenshot");
		Sillabe.esatte_array.push(0);
		}
        $(".sillaba").css("opacity","1");
		$("#guess").prop('disabled',true);
		$("#next").css("opacity","1");
		$("#next").css("cursor","pointer");

		Sillabe.over = true;
    } else if (e.which == 13 && Sillabe.prova == false) {
	if(!Sillabe.game_over){
	
	Sillabe.avanza();}
	else{
	Sillabe.riavvia();
	}
	
	}
});


